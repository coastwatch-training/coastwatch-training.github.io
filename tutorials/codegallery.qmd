---
title: "Code Gallery"
---

The Code Gallery provides a collection of coding-based tutorials that demonstrate how to access, analyze, and visualize CoastWatch satellite data using common programming languages. These tutorials focus on reproducible, hands-on workflows and are intended for users who want to work directly with data through code.

Many tutorials are available in multiple software languages, such as Python, R, and MATLAB, allowing users to follow the same workflow using the tools they prefer.

Each tutorial presents a complete example workflow, including data access (for example through ERDDAP), basic data processing and quality control steps, and the generation of common outputs such as maps, time series, or summary statistics.

The Code Gallery is designed to support exploration, comparison, and reuse of coding workflows. Users are encouraged to adapt the example code to their own research, educational, or operational needs.

Click the **eye** icon to view the tutorial, **box** icon to view the required resources, or **download** to get directed to the source file.


```{python}

#| echo: false
#| warning: false
#| message: false

import pandas as pd
from IPython.display import HTML
from urllib.parse import quote
from pathlib import Path

REPO_RAW_BASE = "https://github.com/madrichardson/CoastWatch-Training-Tutorials/raw/main/"
REPO_BLOB_BASE = "https://github.com/madrichardson/CoastWatch-Training-Tutorials/blob/main/"
REPO_TREE_BASE = "https://github.com/madrichardson/CoastWatch-Training-Tutorials/tree/main/"

BASE_DIR = Path("code_gallery.csv").resolve().parent
TUTORIALS_ROOT = BASE_DIR

df = pd.read_csv("code_gallery.csv", encoding="utf-8-sig").fillna("")

EYE_SVG = (
    '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" '
    'viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" '
    'stroke-linecap="round" stroke-linejoin="round">'
    '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"></path>'
    '<circle cx="12" cy="12" r="3"></circle>'
    '</svg>'
)

DOWNLOAD_SVG = (
    '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" '
    'viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" '
    'stroke-linecap="round" stroke-linejoin="round">'
    '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>'
    '<path d="M7 10l5 5 5-5"></path>'
    '<path d="M12 15V3"></path>'
    '</svg>'
)

RESOURCES_SVG = (
    '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" '
    'viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" '
    'stroke-linecap="round" stroke-linejoin="round">'
    '<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>'
    '<path d="M3.3 7l8.7 5 8.7-5"></path>'
    '<path d="M12 22V12"></path>'
    '</svg>'
)

JS_BACKDROP = """
<script>
function cgOpenModal(id){
  document.getElementById("cg-backdrop").style.display="block";
  document.getElementById(id).style.display="block";
}
function cgCloseModal(){
  document.getElementById("cg-backdrop").style.display="none";
  document.querySelectorAll(".cg-modal").forEach(m=>m.style.display="none");
}
document.addEventListener("keydown",e=>{if(e.key==="Escape")cgCloseModal();});
</script>

<div id="cg-backdrop" class="cg-backdrop" onclick="cgCloseModal()"></div>
"""

cats = sorted([c for c in df["category"].unique() if str(c).strip()])

FILTER_UI = f"""
<div class="cg-filterbar">
  <div class="cg-filtergroup">
    <span class="cg-filterlabel">Category</span>
    <select id="cg-category" class="cg-select">
      <option value="">All</option>
      {''.join([f'<option value="{c}">{c}</option>' for c in cats])}
    </select>
  </div>

  <div class="cg-filtergroup">
    <span class="cg-filterlabel">Software</span>

    <button type="button" class="cg-chip" data-soft="py" aria-pressed="false">
      Python <span class="cg-chipx" aria-hidden="true">×</span>
    </button>

    <button type="button" class="cg-chip" data-soft="r" aria-pressed="false">
      R <span class="cg-chipx" aria-hidden="true">×</span>
    </button>

    <button type="button" class="cg-chip" data-soft="m" aria-pressed="false">
      Matlab <span class="cg-chipx" aria-hidden="true">×</span>
    </button>

    <button type="button" class="cg-chip cg-chipclear" id="cg-clear">
      Clear
    </button>
  </div>

  <div class="cg-filtercount" id="cg-count"></div>
</div>
"""


def modal_eye(modal_id):
    """
    Generate an HTML anchor element that opens a Code Gallery modal.

    This function returns a clickable "eye" icon used in the Code Gallery
    table. When clicked, it triggers the JavaScript `cgOpenModal()` function
    and displays the modal associated with the provided modal ID.

    Parameters
    ----------
    modal_id : str
        The unique HTML ID of the modal to open (e.g., "cg-modal-3").

    Returns
    -------
    str
        An HTML string containing an anchor element with an embedded SVG
        icon and an `onclick` handler for opening the modal.
    """
    return (
        f'<a href="javascript:void(0)" onclick="cgOpenModal(\'{modal_id}\')" '
        f'class="cg-icon">{EYE_SVG}</a>'
    )


def download_icon(path):
    """
    Generate an HTML anchor element linking to a tutorial source file on GitHub.

    This function returns a clickable download icon used in the Code Gallery
    table. If a valid file path is provided, the icon links to the corresponding
    file in the GitHub repository and opens it in a new browser tab. If no path
    is provided, a placeholder dash is returned to indicate that the file is
    unavailable.

    Parameters
    ----------
    path : str
        Relative path to the tutorial source file within the GitHub repository.
        If empty or missing, no download icon is rendered.

    Returns
    -------
    str
        An HTML string containing an anchor element with an embedded SVG icon
        that links to the file on GitHub, or a dash ("—") if no file is available.
    """
    if not path:
        return "—"
    filename = path.split("/")[-1]
    url = f"{REPO_BLOB_BASE}{quote(path)}"
    return (
        f'<a href="{url}" class="cg-icon" aria-label="Open {filename} on GitHub" '
        f'target="_blank" rel="noopener">{DOWNLOAD_SVG}</a>'
    )


def resources_icon_for_row(row) -> str:
    slug = str(row.get("slug", "")).strip()
    if not slug:
        return "—"

    # local check (keep as-is if it's working)
    folder = TUTORIALS_ROOT / slug / "resources"
    if not folder.is_dir():
        return "—"

    has_files = any(p.is_file() for p in folder.rglob("*"))
    if not has_files:
        return "—"

    # GitHub folder path MUST include tutorials/
    folder_path = f"tutorials/{slug}/resources"
    url = f"{REPO_TREE_BASE}{quote(folder_path)}"

    return (
        f'<a href="{url}" class="cg-icon" aria-label="Open resources for {slug}" '
        f'target="_blank" rel="noopener">{RESOURCES_SVG}</a>'
    )


def render_lang_block(label, carousel_html, view_url, single=False):
    """
    Render an HTML block for a single programming-language tutorial output.

    This function generates the HTML markup for displaying a tutorial’s
    preview images (via a carousel) and its associated “View tutorial”
    button inside a Code Gallery modal. The layout adapts based on whether
    the tutorial is the only language available for that entry.

    When `single` is True, the output is rendered in a compact, vertical
    layout where the preview image is shrink-wrapped and the action button
    appears directly beneath it. When `single` is False, the output is
    rendered in the standard multi-language layout, suitable for side-by-
    side display with other language blocks.

    Parameters
    ----------
    label : str
        Human-readable language label (e.g., "Python", "R", "Matlab") used
        in headings and button text.
    carousel_html : str
        Pre-rendered HTML string for the preview image carousel associated
        with this language.
    view_url : str
        URL linking to the full tutorial for this language.
    single : bool, optional
        Flag indicating whether this is the only language block for the
        tutorial. If True, a compact single-language layout is used.
        Defaults to False.

    Returns
    -------
    str
        An HTML string containing the rendered language block, including
        preview images and a link to view the full tutorial.
    """
    if single:
        return f"""
        <div class="cg-one cg-one-vertical">
          <strong>{label} output</strong>
          {carousel_html}
          <div class="cg-one-actions">
            <a class="cg-btn" href="{view_url}">View {label} tutorial</a>
          </div>
        </div>
        """
    else:
        return f"""
        <div>
          <strong>{label} output</strong>
          {carousel_html}
          <p><a class="cg-btn" href="{view_url}">View {label} tutorial</a></p>
        </div>
        """




def render_carousel(img_cell, carousel_id, slug):
    if not img_cell:
        return "<div class='text-muted'>No preview image</div>"

    items = [x.strip() for x in str(img_cell).split("|") if x.strip()]
    if not items:
        return "<div class='text-muted'>No preview image</div>"

    slides = []
    for j, item in enumerate(items):
        if "::" in item:
            fn, caption = item.split("::", 1)
        else:
            fn, caption = item, ""

        wrap_cls = "cg-slide active" if j == 0 else "cg-slide"

        slides.append(
          f"""
          <div class="{wrap_cls} cg-figure">
            <div class="cg-imgframe">
              <img src="{slug}/images/{fn}"
                  loading="lazy"
                  data-caption="{caption}">
            </div>
            <div class="cg-caption">{caption}</div>
          </div>
          """
        )

    nav = ""
    if len(items) > 1:
        nav = (
            f"<div class='cg-nav'>"
            f"  <button class='cg-arrow' onclick=\"cgPrev('{carousel_id}')\">◀</button>"
            f"  <span class='cg-count'>1 / {len(items)}</span>"
            f"  <button class='cg-arrow' onclick=\"cgNext('{carousel_id}')\">▶</button>"
            f"</div>"
        )

    return (
        f"<div id='{carousel_id}' class='cg-carousel' data-idx='0'>"
        f"{''.join(slides)}"
        f"{nav}"
        f"</div>"
    )


rows = []
modals = []


def has_any(*vals):
    """
    Check whether any provided values contain non-empty content.

    This helper function evaluates an arbitrary number of input values and
    returns True if at least one value, when converted to a string and
    stripped of surrounding whitespace, is non-empty. It is commonly used
    to determine whether a tutorial has any meaningful content available
    for a given language (e.g., preview images, view links, or download
    paths).

    Parameters
    ----------
    *vals : tuple
        One or more values to evaluate. Each value is converted to a string
        and checked after stripping leading and trailing whitespace.

    Returns
    -------
    bool
        True if at least one value is non-empty after string conversion and
        whitespace stripping; False otherwise.
    """
    return any(str(v).strip() for v in vals)


for i, r in df.iterrows():
    mid = f"cg-modal-{i}"

    rows.append({
        "Title": r["title"],
        "Category": r["category"],
        "Preview": modal_eye(mid),
        "Python ↓": download_icon(r["py_download"]),
        "R ↓": download_icon(r["r_download"]),
        "Matlab ↓": download_icon(r["m_download"]),
    })

    has_py_block = has_any(r["py_img"], r["py_view"], r["py_download"])
    has_r_block  = has_any(r["r_img"], r["r_view"], r["r_download"])
    has_m_block  = has_any(r.get("m_img",""), r.get("m_view",""), r.get("m_download",""))

    n_blocks = sum([has_py_block, has_r_block, has_m_block])
    single = (n_blocks == 1)

    grid_class = "cg-grid cg-grid-single" if single else "cg-grid"
    
    slug = str(r.get("slug", "")).strip()

    # -----------------------
    # Python block
    # -----------------------
    py_block = ""
    if has_py_block:
        py_block = render_lang_block(
            "Python",
            render_carousel(r.get("py_img", ""), f"py-carousel-{i}", slug),
            r.get("py_view", ""),
            single=single
        )

    # -----------------------
    # R block
    # -----------------------
    r_block = ""
    if has_r_block:
        r_block = render_lang_block(
            "R",
            render_carousel(r.get("r_img", ""), f"r-carousel-{i}", slug),
            r.get("r_view", ""),
            single=single
        )

    # -----------------------
    # Matlab block
    # -----------------------
    m_block = ""
    if has_m_block:
        m_block = render_lang_block(
            "Matlab",
            render_carousel(r.get("m_img", ""), f"m-carousel-{i}", slug),
            r.get("m_view", ""),
            single=single
        )

    
    modals.append(f"""
    <div id="{mid}" class="cg-modal">
      <h3>{r["title"]}</h3>
      <p>{r["description"]}</p>

      <div class="{grid_class}">
        {py_block}
        {r_block}
        {m_block}
      </div>

      <button class="cg-close" onclick="cgCloseModal()">Close</button>
    </div>
    """)


table_rows = []

for i, r in df.iterrows():
    mid = f"cg-modal-{i}"

    # language availability flags
    has_py = 1 if str(r.get("py_view","")).strip() or str(r.get("py_download","")).strip() else 0
    has_r  = 1 if str(r.get("r_view","")).strip()  or str(r.get("r_download","")).strip()  else 0
    has_m  = 1 if str(r.get("m_view","")).strip()  or str(r.get("m_download","")).strip()  else 0

    title = str(r.get("title",""))
    cat   = str(r.get("category",""))

    table_rows.append(f"""
      <tr class="cg-row"
          data-category="{cat.replace('"','&quot;')}"
          data-has-py="{has_py}"
          data-has-r="{has_r}"
          data-has-m="{has_m}">
        <td>{title}</td>
        <td>{cat}</td>
        <td>{modal_eye(mid)}</td>
        <td>{resources_icon_for_row(r)}</td>
        <td>{download_icon(r.get("py_download",""))}</td>
        <td>{download_icon(r.get("r_download",""))}</td>
        <td>{download_icon(r.get("m_download",""))}</td>
      </tr>
    """)

table = f"""
<table class="code-gallery-table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Category</th>
      <th>Preview</th>
      <th>Resources</th>
      <th>Python ↓</th>
      <th>R ↓</th>
      <th>Matlab ↓</th>
    </tr>
  </thead>
  <tbody>
    {''.join(table_rows)}
  </tbody>
</table>
"""

HTML(JS_BACKDROP + FILTER_UI + table + "".join(modals))

```


<script>
(function(){
  function openModal(id){
    const backdrop = document.getElementById("cg-backdrop");
    const modal = document.getElementById(id);
    if(!backdrop || !modal) return;
    backdrop.style.display = "block";
    modal.style.display = "block";
    modal.setAttribute("aria-hidden","false");
  }

  function closeModal(){
    const backdrop = document.getElementById("cg-backdrop");
    if(backdrop) backdrop.style.display = "none";
    document.querySelectorAll(".cg-modal").forEach(m => {
      m.style.display = "none";
      m.setAttribute("aria-hidden","true");
    });
  }

  // expose globally so inline onclick works
  window.cgOpenModal = openModal;
  window.cgCloseModal = closeModal;

  // close on ESC
  document.addEventListener("keydown", (e) => {
    if(e.key === "Escape") closeModal();
  });
})();
</script>


<script>
function cgShow(idx, id){
  const root = document.getElementById(id);
  if(!root) return;

  // IMPORTANT: target slides, not imgs
  const slides = root.querySelectorAll(".cg-slide");
  if(!slides.length) return;

  const n = slides.length;
  idx = ((idx % n) + n) % n;

  slides.forEach((el, j) => el.classList.toggle("active", j === idx));
  root.dataset.idx = String(idx);

  const counter = root.querySelector(".cg-count");
  if(counter) counter.textContent = (idx+1) + " / " + n;
}

function cgPrev(id){
  const root = document.getElementById(id);
  const idx = parseInt(root?.dataset?.idx || "0", 10);
  cgShow(idx - 1, id);
}

function cgNext(id){
  const root = document.getElementById(id);
  const idx = parseInt(root?.dataset?.idx || "0", 10);
  cgShow(idx + 1, id);
}
</script>


<script>
(function () {
  function openImg(src, caption){
    const lb = document.getElementById("cg-imglightbox");
    const im = document.getElementById("cg-imglightbox-img");
    const cap = document.getElementById("cg-imglightbox-caption");
    if(!lb || !im || !cap) return;

    im.src = src;
    im.alt = caption || "";
    cap.textContent = caption || "";

    lb.style.display = "block";
    lb.setAttribute("aria-hidden","false");
  }

  function closeImg(){
    const lb = document.getElementById("cg-imglightbox");
    const im = document.getElementById("cg-imglightbox-img");
    if(!lb || !im) return;

    lb.style.display = "none";
    lb.setAttribute("aria-hidden","true");
    im.src = "";
  }

  // expose so the close button works
  window.cgCloseImg = closeImg;

  // click any preview image inside a cg-modal to enlarge
  document.addEventListener("click", (e) => {
    const img = e.target.closest(".cg-modal img");
    if(!img) return;

    openImg(
      img.getAttribute("src"),
      img.getAttribute("data-caption")
    );
  });


  // click the dark area to close
  document.addEventListener("click", (e) => {
    if(e.target && e.target.id === "cg-imglightbox") closeImg();
  });

  // ESC closes the image lightbox too
  document.addEventListener("keydown", (e) => {
    if(e.key === "Escape") closeImg();
  });
})();
</script>

<div id="cg-imglightbox" class="cg-imglightbox" aria-hidden="true">
  <button class="cg-imgclose" onclick="cgCloseImg()">✕</button>
  <img id="cg-imglightbox-img" alt="">
  <div id="cg-imglightbox-caption" class="cg-lightbox-caption"></div>
</div>


<script>
(function(){
  function activeSoftware(){
    const active = { py:false, r:false, m:false };
    document.querySelectorAll(".cg-chip[data-soft]").forEach(btn => {
      const k = btn.dataset.soft;
      active[k] = btn.getAttribute("aria-pressed") === "true";
    });
    return active;
  }

  function cgApplyFilters(){
    const cat = document.getElementById("cg-category")?.value || "";
    const soft = activeSoftware();

    // if no chips active -> show all software
    const anySoft = soft.py || soft.r || soft.m;

    const rows = Array.from(document.querySelectorAll("tr.cg-row"));
    let shown = 0;

    rows.forEach(row => {
      const rowCat = row.dataset.category || "";
      const hasPy = row.dataset.hasPy === "1";
      const hasR  = row.dataset.hasR  === "1";
      const hasM  = row.dataset.hasM  === "1";

      const matchesCat = !cat || rowCat === cat;

      const matchesSoftware =
        !anySoft ||
        (soft.py && hasPy) ||
        (soft.r  && hasR)  ||
        (soft.m  && hasM);

      const ok = matchesCat && matchesSoftware;

      row.style.display = ok ? "" : "none";
      if(ok) shown += 1;
    });

    const countEl = document.getElementById("cg-count");
    if(countEl) countEl.textContent = `${shown} shown`;
  }

  // Toggle chip
  document.addEventListener("click", (e) => {
    const chip = e.target.closest(".cg-chip[data-soft]");
    if(chip){
      const isOn = chip.getAttribute("aria-pressed") === "true";
      chip.setAttribute("aria-pressed", String(!isOn));
      cgApplyFilters();
      return;
    }

    // Clear button
    if(e.target && e.target.id === "cg-clear"){
      document.getElementById("cg-category").value = "";
      document.querySelectorAll(".cg-chip[data-soft]").forEach(btn => btn.setAttribute("aria-pressed","false"));
      cgApplyFilters();
      return;
    }
  });

  // Category change
  document.addEventListener("change", (e) => {
    if(e.target && e.target.id === "cg-category") cgApplyFilters();
  });

  document.addEventListener("DOMContentLoaded", cgApplyFilters);
})();
</script>





